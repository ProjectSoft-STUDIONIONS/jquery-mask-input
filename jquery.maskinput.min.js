/*
  Mask Input plugin for jQuery
  Licensed under the MIT license (https://github.com/shaungrady/jquery-mask-input/blob/master/LICENSE)
  Version: 1.3
*/
(function(e,t,n,r){function s(e){if(e.selectionStart!==r)return e.selectionStart;else if(n.selection){e.focus();var t=n.selection.createRange();t.moveStart("character",-e.value.length);return t.text.length}}function o(e,t){if(e.setSelectionRange){e.focus();e.setSelectionRange(t,t)}else if(e.createTextRange){var n=e.createTextRange();n.collapse(true);n.moveEnd("character",t);n.moveStart("character",t);n.select()}}function u(e){if(e.selectionStart!==r)return e.selectionEnd-e.selectionStart;if(n.selection)return n.selection.createRange().text.length}var i={9:/\d/,A:/[a-zA-Z]/,"*":/[a-zA-Z0-9]/};e.fn.extend({maskInput:function(t){if(!this.length)return this;return this.filter("input").each(function(n,a){function v(t){return e.inArray(t,c)>-1}function m(t){var n="",r=h.slice();e.each(t.split(""),function(e,t){if(r.length&&r[0].test(t)){n+=t;r.shift()}});return n}function g(t){var n="",r=c.slice();e.each(p.split(""),function(e,i){if(t.length&&e===r[0]){n+=t.charAt(0)||"_";t=t.substr(1);r.shift()}else n+=i});return n}function y(t){var n=e(this);if(!n.data("isUnmaskedValueValid")){n.val("");n.attr("value-unmasked","")}n.data("caretPositionPreinput",0);n.data("selectionLengthPreinput",0)}function b(t){var n=t.which,r=t.type;if(n==16||n==91)return true;var i=e(this),a=i.val(),f=i.data("valuePreinput")||"",l,h=m(a),d=i.attr("value-unmasked")||"",y=s(this)||0,w=i.data("caretPositionPreinput")||0,E=y-w,S=c[0],x=c[h.length]||c.slice().pop()+1,T=u(this),N=i.data("selectionLengthPreinput")||0,C=T>0,k=N>0,L=a.length>f.length||N&&a.length>f.length-N,A=a.length<f.length||N&&a.length==f.length-N,O=n>=37&&n<=40&&t.shiftKey,M=n==37,_=n==8||r!="keyup"&&A&&E===-1,D=n==46||r!="keyup"&&A&&E===0&&!k,P=(M||_||r=="click")&&y>0;if(k&&L&&y<=S)y=S+1;i.data("selectionLengthPreinput",T);i.unbind("mouseout.mask").one("mouseout.mask",b);if(r=="mouseout"||O||C&&(r=="click"||r=="keyup"))return true;if((r=="input"||r=="propertychange")&&A&&!k&&h===d){while(_&&y>0&&!v(y))y--;while(D&&y<p.length&&e.inArray(y,c)==-1)y++;var H=e.inArray(y,c);h=h.substring(0,H)+h.substring(H+1)}i.attr("value-unmasked",h);i.data("isUnmaskedValueValid",h.length===c.length-1);l=g(h);i.data("valuePreinput",l);i.val(l);if(P)y--;y=y>x?x:y<S?S:y;while(!v(y)&&y>S&&y<x)y+=P?-1:1;if(P&&y<x||L&&!v(w))y++;i.data("caretPositionPreinput",y);o(this,y)}var f=e(a),l=f.attr("mask")||t,c=[],h=[],p="",d=0;if(l===r)return true;if(l instanceof Array){e.each(l,function(t,n){if(n instanceof RegExp){c.push(d++);p+="_";h.push(n)}else if(typeof n=="string"){e.each(n.split(""),function(e,t){p+=t;d++})}})}else{e.each(l.split(""),function(e,t){if(i[t]){c.push(d);p+="_";h.push(i[t])}else p+=t;d++})}if(!c.length)return this;c.push(d);(function(e){var t=m(e.val()),n=g(t),r=t.length===c.length-1,i=e.attr("maxlength");e.val(n);e.attr("value-unmasked",t);e.data("isUnmaskedValueValid",r);if(i)e.attr("maxlength",parseInt(i,10)+1)})(f);f.attr("placeholder",p);f.unbind(".mask");f.bind("blur.mask",y).triggerHandler("blur");f.bind("input.mask propertychange.mask keyup.mask click.mask",b)})}})})(jQuery,window,document)